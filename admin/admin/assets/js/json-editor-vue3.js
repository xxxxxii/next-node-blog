import{J as e}from"./jsoneditor.js";import{_ as t}from"./@qiun.js";import{o as i,c as n,a as o,V as s}from"./@vue.js";const r={ref:"jsonEditorVue",class:"json-editor-vue"};const l=t({editor:null,name:"json-editor-vue",internalChange:!1,props:{modelValue:Object|Number|Array,options:Object,currentMode:{type:String,default:"code"},modeList:{type:Array,default:()=>["tree","code","form","text","view"]},language:{type:String,default:"en"}},data(){return{json:this.modelValue,expandedModes:["tree","view","form"],isFullScreen:!1,hasLogo:!0,showFullScreen:!1}},watch:{modelValue:{immediate:!0,deep:!0,handler(e){this.internalChange||(this.setEditorContent(e),this.$nextTick((()=>{this.expandAll()})))}}},mounted(){this.init();const e=document.querySelector(".jsoneditor-menu .jsoneditor-poweredBy");this.hasLogo=e&&"none"!==window.getComputedStyle(e).display,this.showFullScreen=!0},unmounted(){var e;null==(e=this.editor)||e.destroy(),this.editor=null},methods:{toggleFullScreen(){this.isFullScreen=!this.isFullScreen,this.$nextTick((()=>{const e=new Event("resize");window.dispatchEvent(e)}))},init(){const{currentMode:t,modeList:i,options:n}=this,o={...n,indentation:2,language:this.language,mode:t,modes:i,onChange:()=>{const e=e=>{this.json=e,this.$emit("update:modelValue",e),this.$emit("change",e),this.internalChange=!0,this.$nextTick((()=>{this.internalChange=!1}))};if(this.editor.getText())try{e(this.editor.get())}catch(t){}else e("")},onModeChange:()=>{this.expandAll()},onTextSelectionChange:(e,t,i)=>{this.$emit("textSelectionChange",this.editor,e,t,i)},onSelectionChange:(e,t)=>{this.$emit("selectionChange",this.editor,e,t)},onColorPicker:(e,t,i)=>{this.$emit("colorPicker",this.editor,e,t,i)},onFocus:({target:e})=>{this.$emit("focus",this.editor,e)},onBlur:({target:e})=>{this.$emit("blur",this.editor,e)},onValidationError:e=>{this.$emit("validationError",this.editor,e)}};this.editor=new e(this.$refs.jsonEditorVue,o,this.json)},expandAll(){var e,t;this.expandedModes.includes(null==(e=this.editor)?void 0:e.getMode())&&(null==(t=this.editor)||t.expandAll())},setEditorContent(e){var t;null==(t=this.editor)||t.set(e)}}},[["render",function(e,t,l,d,a,h){return i(),n("div",{class:s(["container",{"full-screen-container":a.isFullScreen}])},[o("div",r,null,512),o("div",{class:s(["full-screen",{show:a.showFullScreen,right:!a.hasLogo}]),onClick:t[0]||(t[0]=(...e)=>h.toggleFullScreen&&h.toggleFullScreen(...e))},null,2)],2)}],["__scopeId","data-v-71f05bd7"]]);l.install=function(e){e.component(l.name,l)};export{l as J};
